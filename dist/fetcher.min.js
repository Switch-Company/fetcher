/**
 * @switch-company/fetcher - Wrap the Fetch API with convenience methods.
 * @version v1.0.0
 * @link https://www.npmjs.com/package/@switch-company/fetcher
 * @license ISC
 **/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.fetcher=e()}(this,function(){"use strict";var t={headers:{"X-Requested-With":"XMLHttpRequest"},options:{credentials:"same-origin"},timeout:3e4},e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=t[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){o=!0,a=t}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function n(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(n=Object.assign({},t.options,n)).headers||(n.headers={}),n.headers=Object.assign({},t.headers,n.headers),new Promise(function(r,o){var a=!1,i=function(t){a=!0,o({status:t?0:599,statusText:t?t.message:"Network Connect Timeout Error",url:e})},u=window.setTimeout(i,t.timeout);window.fetch(e,n).then(function(t){a||r(t)}).catch(i).then(function(){window.clearTimeout(u)})}).then(function(t){return function(t,e,n){if(!n)return t;var o=t.headers.get("content-type"),a=void 0;o&&(o=o.split(";")[0]);switch(o){case"application/json":a=t.json();break;case"multipart/form-data":a=t.formData();break;case"application/octet-stream":a=t.blob();break;default:a=t.text()}return a.then(function(e){var n=function(t,e){var n=e.ok,o=e.redirected,a=e.status,i=e.statusText,u=e.type,d=e.url,s={},c=!0,f=!1,l=void 0;try{for(var y,h=e.headers.entries()[Symbol.iterator]();!(c=(y=h.next()).done);c=!0){var p=y.value,m=r(p,2),v=m[0],b=m[1];s[v]=b}}catch(t){f=!0,l=t}finally{try{!c&&h.return&&h.return()}finally{if(f)throw l}}return{headers:s,ok:n,redirected:o,status:a,statusText:i,type:u,url:d,data:t}}(e,t);return t.ok?n:Promise.reject(n)})}(t,0,o)})}var o=window.encodeURIComponent;function a(t){return Object.keys(t).map(function(e){return Array.isArray(t[e])?t[e].map(function(t){return o(e)+"="+o(t)}).join("&"):o(e)+"="+o(t[e])}).join("&")}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(e.method="get",e.data)&&(t+=t.split("?")[1]?"&"+a(e.data):"?"+a(e.data),delete e.data);return n(t,e,r)}function u(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=void 0,i=!0;return r.headers?Object.keys(r.headers).some(function(t){if("content-type"===t.toLowerCase())return a=r.headers[t].toLowerCase().split(";")[0],!0}):r.headers={},"multipart/form-data"!==a&&"application/octet-stream"!==a||(i=!1),i&&r.data&&("append"in r.data.__proto__||"type"in r.data.__proto__?(i=!1,r.data.type&&!a&&(r.headers["content-type"]=r.data.type)):a||"object"!==e(r.data)||(r.headers["content-type"]="application/json;charset=UTF-8")),(r=Object.assign({},{method:"post"},r)).data&&(r.body=i?JSON.stringify(r.data):r.data,delete r.data),n(t,r,o)}function d(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new FormData(t),o={},a=!0,i=!1,u=void 0;try{for(var d,s=n[Symbol.iterator]();!(a=(d=s.next()).done);a=!0){var c=d.value,f=r(c,2),l=f[0],y=f[1];if((!e||"string"==typeof y)&&("File"!==y.constructor.name||0!==y.size))if(o[l]){if(Array.isArray(o[l])){o[l].push(y);continue}o[l]=[o[l],y]}else o[l]=y}}catch(t){i=!0,u=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw u}}return o}var s=window.encodeURIComponent;var c={toJSON:d,toQuery:function(t){var e=d(t,!0);return Object.keys(e).map(function(t){return Array.isArray(e[t])?e[t].map(function(e){return s(t)+"="+s(e)}).join("&"):s(t)+"="+s(e[t])}).join("&")},hasFile:function(t){return Array.from(t.elements).some(function(t){return"file"===t.type&&t.files.length>0})}};return{get:i,send:u,form:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=u,o=t.enctype;return t.method&&!e.method&&(e.method=t.method),o&&!e.header&&(e.header["Content-Type"]=o),"get"===e.method&&(n=i),c.hasFile(t)?(e.header||(e.header={}),e.header["Content-Type"]="multipart/form-data",e.data=new FormData(t)):e.data=c.toJSON(t),n(t.action,e,r)},config:t}});
